{"version":3,"file":"koeasyui.js","sources":["../src/generateOption.ts","../src/basecomp.ts","../src/utils.ts","../src/generates/baseEasyuiComp.ts","../src/generates/koeasyuimessager.ts","../src/generates/kodialogs.ts","../src/generates/kodeskop.ts","../src/generates/easyuiHelper.ts","../src/generates/optionAndMethodsRelation.ts","../src/generates/depends.ts","../src/methodExceuteProvider/depcheckExecute.ts","../src/methodExceuteProvider/executeProvider.ts","../src/defaultGenerate.ts","../src/generates/extendbind.ts","../src/generates/easyuiGenerate.ts","../src/generates/EasyuiHelper.ts","../src/generates/index.ts","../src/generateFactory.ts","../src/loader.ts","../src/kocomponents.ts","../src/main.ts"],"sourcesContent":["\r\n/**\r\n * 生成器的配置项\r\n */\r\nexport class GenerateOption{\r\n    public ko:KnockoutStatic;\r\n    public jquery:JQueryStatic;\r\n    constructor(ko:KnockoutStatic){\r\n        this.ko = ko;\r\n        this.jquery = $;\r\n    }\r\n}","import {COMPTYPE} from './utils';\r\n\r\n/**\r\n * 组件基类\r\n */\r\nexport abstract class BaseComp{\r\n    public name:string;\r\n    public type: COMPTYPE;\r\n    constructor(type:COMPTYPE){\r\n        this.type = type;\r\n    }\r\n    /**\r\n     * 绘制组件\r\n     * @param options 配置参数\r\n     */\r\n    public abstract paint(options:any);\r\n    /**\r\n    * 组件重绘方法\r\n    * @param options 配置参数\r\n    */\r\n    public abstract repaint(options:any);\r\n}","\r\n/**\r\n * 返回指定数据不重复的记录\r\n * @param arrays \r\n */\r\nexport function unique(arrays:Array<any>):Array<any>{\r\n    let result = new Array<any>();\r\n    let hash = Object.create({});\r\n    for(let irow = 0; irow < arrays.length; ++ irow){\r\n        let elm = arrays[irow];\r\n        if(!hash[elm]){\r\n            result.push(elm);\r\n            hash[elm] = true;\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nexport enum CONSTKEY{\r\n    /**\r\n     * 组件名称前缀\r\n     */\r\n    CompPrefix = 'ko-'\r\n}\r\n\r\n/**\r\n * 根据组件名称获取模板DOM\r\n * @param compName \r\n */\r\nexport function getTemplate(compName:string):string{\r\n    let defaultVaue = '<div></div>';\r\n    let specialValue = {\r\n        'linkbutton': '<a></a>',\r\n        'layout': '<div style=\"height:100%\" ><!-- ko template:{ nodes:$componentTemplateNodes,data:$context.$parent } --><!-- /ko --></div>',\r\n        'dialog': '<div><!-- ko template:{ nodes:$componentTemplateNodes,data:$context.$parent } --><!-- /ko --></div>',\r\n        'datagrid': '<table></table>',\r\n        'treegrid': '<table></table>'\r\n    };\r\n    let val = specialValue[compName];\r\n    if(!val){\r\n        val = defaultVaue;\r\n    }\r\n    return val;\r\n}\r\n\r\n/**\r\n * 将arguments转换为数组\r\n */\r\nexport let convertArgToArray = Array.prototype.slice; \r\n\r\n/**\r\n * 组件类型\r\n */\r\nexport enum COMPTYPE{\r\n    /**\r\n     * easyui实例组件\r\n     */\r\n    easyui = 1,\r\n\r\n    /**\r\n     * 普通组件类型\r\n     */\r\n    norm = 8\r\n}","import {BaseComp} from '../basecomp';\r\nimport { COMPTYPE, CONSTKEY, getTemplate } from '../utils';\r\n\r\n/**\r\n * 所有easyui的基类\r\n */\r\nexport abstract class BaseEasyuiComp extends BaseComp{\r\n    public $dom:JQuery; \r\n    public $parent:JQuery;\r\n    public props:any;\r\n    protected koContext;\r\n    constructor(name, props, componentConfig){\r\n        super(COMPTYPE.easyui);\r\n        this.props = props;\r\n        this.name = name;\r\n        this.$dom = $($(componentConfig.element)[0].firstChild);\r\n        this.$parent = this.$dom.parent();\r\n        let context = ko.contextFor(componentConfig.element);\r\n        $.data(componentConfig.element, context);\r\n        this.koContext = context;\r\n    }\r\n    \r\n    /**\r\n     * 根据参数创建组件的配置对象（核心方法）\r\n     * @param options 配置参数 \r\n     */\r\n    protected createOptionsCore(options){\r\n        let opt = null;\r\n        if(options){\r\n            //viewModel不能转换\r\n            let viewModel = options.viewModel || null;\r\n            opt = ko.toJS(options);\r\n            if(viewModel){\r\n                opt.viewModel = viewModel;\r\n            }\r\n            $.map(opt,(value, key:string)=>{\r\n                if(key.substring(0,2) == 'on' && $.isFunction(value)){\r\n                    //事件\r\n                    opt[key] = value.bind(this);\r\n                }\r\n            });\r\n        } \r\n        return opt;\r\n    }\r\n    /**\r\n     * 根据参数创建组件的配置对象\r\n     * @param options 配置参数 \r\n     */\r\n    protected createOptions(options){\r\n        return this.createOptionsCore(options);\r\n    }\r\n    /**\r\n     * 绘制组件\r\n     * @param options \r\n     */\r\n    public paint(options:any){\r\n        let opt = this.createOptions(options);\r\n        this.$dom[this.name](opt);\r\n    }\r\n    /**\r\n    * 重置组件到初始化状态\r\n    * @param options 配置项\r\n    */\r\n    public resetComp(options:any){\r\n        let $parent = this.$dom.closest(`${CONSTKEY.CompPrefix}${this.name}`);\r\n        if($parent.length == 0){\r\n            $parent = this.$parent;\r\n        }\r\n\r\n        //@ts-ignore\r\n        this.destroy && this.destroy(this);\r\n        let $dom = $(getTemplate(this.name));\r\n        $parent.append($dom);\r\n        this.$dom = $dom; \r\n    }\r\n    \r\n}","import { BaseEasyuiComp } from './baseEasyuiComp';\r\nimport { COMPTYPE, CONSTKEY, convertArgToArray } from '../utils';\r\n\r\nexport class EasyuiMessager extends BaseEasyuiComp{ \r\n    constructor(params, componentConfig){ \r\n        super('messager', Object.getOwnPropertyNames($.messager.defaults),  componentConfig); \r\n        this.bindMethods();\r\n    }\r\n    private bindMethods(){\r\n        var keys = this.getMethodKeys();\r\n        $.map(keys, key => {\r\n            this[key] = function(){\r\n                let args = convertArgToArray.call(arguments);\r\n                $.messager[key].apply($.messager, args);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取方法的Key数据\r\n     */\r\n    private getMethodKeys():Array<string>{\r\n        let methodKeys = new Array<string>();\r\n        $.map(Object.getOwnPropertyNames($.messager), (key)=>{\r\n            if(key != 'defaults'){\r\n                methodKeys.push(key);\r\n            }\r\n        });\r\n        return methodKeys;\r\n    }\r\n    public paint(options:any){\r\n        let opts = this.createOptions(options);\r\n        $.extend($.messager.defaults, opts);\r\n    }\r\n    public repaint(options: any) {  \r\n        this.paint(options);\r\n    }\r\n}   ","import { BaseComp } from '../basecomp';\r\nimport { COMPTYPE, CONSTKEY, convertArgToArray } from '../utils';\r\n\r\n/**\r\n * 基于easyui's dialog的复式弹出窗口组件\r\n * modify: 2018-09-19 sam dargon add $key， 用于外界获取实例化的对话框\r\n */\r\nexport class EasyuiDialogs extends BaseComp {\r\n    public paint(options: any) { \r\n    }\r\n    public list:KnockoutObservableArray<any>;\r\n    public bindContext:any;\r\n    constructor(params, componentConfig){\r\n        super(COMPTYPE.norm);\r\n        this.name = 'dialogs';\r\n        this.bindContext = ko.contextFor(componentConfig.element);\r\n        this.list = ko.observableArray(); \r\n    }\r\n    public repaint(options: any) {\r\n    }\r\n    /**\r\n     * 添加弹出窗口\r\n     * @param params \r\n     */\r\n    public addDialog(params){\r\n        let options = params || {};\r\n        let that = this;\r\n        let key = 'dialogs_' + ko.unwrap(this.list).length;\r\n        let funClose = options.onClose;\r\n        options.onClose = ((key)=>{ \r\n            return function(){  \r\n                that.removeDialog(key, this.$dom[0]);\r\n                if(funClose){\r\n                    funClose.call(that, key);\r\n                }\r\n            }\r\n        })(key);\r\n        //add: 2018-09-19 sam dargon, remark: set $key, use getContextForDialog in app.\r\n        options.$key = key;\r\n        this.list.push({\r\n            name:'ko-dialog',\r\n            params:{\r\n                options: options\r\n            },\r\n            key: key\r\n        });\r\n    }\r\n    /**\r\n     * 移除已弹出的窗口\r\n     * @param key 需要移除的窗口的编号\r\n     */\r\n    public removeDialog(key:string, dom){\r\n        ko.cleanNode(dom.firstElementChild);\r\n        this.list.remove((item)=>{\r\n            return item.key === key;\r\n        });\r\n    } \r\n    static getTemplate(){\r\n        return '<div data-bind=\"foreach:{data:list}\" ><div data-bind=\"component:$data,attr:{id:(\\'dialogs_\\' + $index())}\" ></div></div>'\r\n    }\r\n}","import { BaseEasyuiComp } from './baseEasyuiComp';\nimport { convertArgToArray } from '../utils';\n\n/**\n * 基于easyui's desktop\n * modify: 2019-12-07 sam dargon\n */\nexport class EasyuiDesktop extends BaseEasyuiComp {\n  constructor(params, componentConfig){ \n    //@ts-ignore\n    super('desktop', Object.getOwnPropertyNames($.fn.desktop.defaults),  componentConfig); \n    this.bindMethods();\n  }\n  private bindMethods(){\n      var keys = this.getMethodKeys();\n      $.map(keys, key => {\n          this[key] = function(){\n              let args = convertArgToArray.call(arguments);\n              args.unshift(key);\n              this.$dom[this.name].apply(this.$dom, args);\n          }\n      });\n  }\n\n  /**\n   * 获取方法的Key数据\n   */\n  private getMethodKeys():Array<string>{\n      let methodKeys = new Array<string>();\n      //@ts-ignore\n      $.map(Object.getOwnPropertyNames($.fn.desktop.methods), (key)=>{\n          if(key != 'defaults'){\n              methodKeys.push(key);\n          }\n      });\n      return methodKeys;\n  }\n  public paint(options:any){\n      let opts = this.createOptions(options);\n      //@ts-ignore\n      opts = $.extend($.fn.desktop.defaults, opts);\n      super.paint(opts);\n  }\n  public repaint(options: any) {  \n      this.paint(options);\n  }\n}","import {IExecute} from '../methodExceuteProvider';\r\nimport {CONSTKEY, getTemplate, COMPTYPE, convertArgToArray} from '../utils';\r\nimport {BaseEasyuiComp} from './baseEasyuiComp';\r\nimport { ExtendBind } from './extendbind';\r\n \r\nexport  class EasyuiHelper{\r\n    static createEasyui(compName:string, props:Array<string>, methods, execute:IExecute, extendBind:ExtendBind):any{\r\n        let tmpClass = class extends BaseEasyuiComp { \r\n            public $dom:JQuery;\r\n            public params: any;\r\n            constructor(params, componentConfig){ \r\n                super(compName.toLowerCase(), props, componentConfig);\r\n                this.params = params;\r\n                if(!this.params.options){\r\n                    this.params.options = {};\r\n                }\r\n                this.$dom = $($(componentConfig.element)[0].firstChild);\r\n                let that = this;\r\n                //绑定方法，方法还需要继承组件支持的方法的绑定\r\n                $.map(Object.getOwnPropertyNames(methods), index=>{\r\n                    if(!$.isNumeric(index)) return true;\r\n                    let methodName = methods[index]; \r\n                    that[methodName] = function(){\r\n                        //需要加一个拦截机制，用于处理依赖组件的方法（如：combogrid，依赖grid，那么grid的方法怎么执行）\r\n                        let args = convertArgToArray.call(arguments);\r\n                        //传入的参数进行扩展\r\n                        extendBind.extend(that.name, args[0], that.koContext); \r\n                        args.unshift(methodName);\r\n                        return execute.execute(that.name, methodName, that.$dom, args); \r\n                    }; \r\n                }); \r\n            }   \r\n            \r\n            /**\r\n             * 绑定change事件\r\n             */\r\n            private bindChangeEvent(sourceopts, opt:any){ \r\n                \r\n                let changeEvent = false;\r\n                $.map(props,(item, key)=>{\r\n                    if(item == 'onChange'){\r\n                        changeEvent = true;\r\n                        return false;\r\n                    }\r\n                });\r\n                if(sourceopts.value && ko.isObservable(sourceopts.value) && changeEvent){\r\n                    let onChangeFn = opt.onChange;\r\n                    let that = this;\r\n                    opt['onChange'] = function(newValue, oldValue){\r\n                        //modify: 2018-10-10 sam dragon set value, but don't send notification.\r\n                        // and add onChange event.\r\n                        sourceopts.value._latestValue = newValue; \r\n                        onChangeFn && onChangeFn.call(that, newValue, oldValue);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            protected createOptions(options){\r\n                let opt = this.createOptionsCore(options);\r\n                if(options){\r\n                    this.bindChangeEvent(options, opt);\r\n                }    \r\n                extendBind.extend(this.name, opt, this.koContext); \r\n                return opt;\r\n            } \r\n            public repaint(options:any){\r\n                this.resetComp(options);\r\n                this.paint(options);\r\n            }\r\n            public dispose(){\r\n                console.log('dispose ' + this.name);\r\n                //@ts-ignore\r\n                if(this.computedObservable){\r\n                    //@ts-ignore\r\n                    this.computedObservable.dispose();\r\n                }\r\n                if(this.params.options.dispose){\r\n                    this.params.options.dispose.apply(this);\r\n                }else{\r\n                    //@ts-ignore\r\n                    this.destroy && this.destroy();\r\n                }\r\n            }\r\n        };\r\n\r\n        return tmpClass;\r\n    }\r\n}\r\n/**\r\n * 根据dom获取上下文\r\n * @param dom dom节点 \r\n */\r\nexport function getContextFor(dom:HTMLElement){\r\n    let comp = $.data(dom);\r\n    return comp ? comp.$data : null;\r\n}","/**\r\n * 配置与方法的关系\r\n * 确定那些配置的改变，可以通过方法实现\r\n */\r\nexport let relation = {\r\n    tooltip:{\r\n        'content': 'update'\r\n    },\r\n    textbox:{\r\n        'value': 'setValue'\r\n    },\r\n    panel:{\r\n        'title': 'setTitle'\r\n    },\r\n    passwordbox:{\r\n        'value': 'setValue'\r\n    },\r\n    combo:{\r\n        'value': 'setValue'\r\n    },\r\n    combobox:{\r\n        'value': 'setValue',\r\n        'data': 'loadData'\r\n    },\r\n    combotree:{\r\n        'value': 'setValue',\r\n        'data': 'loadData'\r\n    },\r\n    combogrid:{        \r\n        'value': 'setValue',\r\n        'data': 'loadData'\r\n    },\r\n    combotreegrid:{\r\n        'value': 'setValue',\r\n        'data': 'loadData'\r\n    },\r\n    tagbox:{\r\n        'value': 'setValue',\r\n        'data': 'loadData'\r\n    },\r\n    numberbox:{        \r\n        'value': 'setValue'\r\n    },\r\n    datebox:{\r\n        'value': 'setValue'\r\n    },\r\n    datetimebox:{\r\n        'value': 'setValue'\r\n    },\r\n    datetimespinner:{\r\n        'value': 'setValue'\r\n    },\r\n    spinner:{\r\n        'value': 'setValue'\r\n    },\r\n    numberspinner:{\r\n        'value': 'setValue'\r\n    },\r\n    timespinner:{\r\n        'value': 'setValue'\r\n    },\r\n    slider:{\r\n        'value': 'setValue'\r\n    },\r\n    filebox:{\r\n        'value': 'setValue'\r\n    },\r\n    datagrid:{\r\n        'data': 'loadData'\r\n    },\r\n    datalist:{\r\n        'data': 'loadData'\r\n    },\r\n    propertygrid:{\r\n        'data': 'loadData'\r\n    },\r\n    tree:{\r\n        'data': 'loadData'\r\n    },\r\n    treegrid:{\r\n        'data': 'loadData'\r\n    }\r\n}","/**\r\n * easyui控件依赖关系\r\n */\r\nexport let depents = {\r\n    pagination: { dependencies: ['linkbutton'] },\r\n    datagrid: { dependencies: ['panel', 'resizable', 'linkbutton', 'pagination'] },\r\n    treegrid: { dependencies: ['datagrid'] },\r\n    propertygrid: { dependencies: ['datagrid'] },\r\n    datalist: { dependencies: ['datagrid'] },\r\n    window: { dependencies: ['resizable', 'draggable', 'panel'] },\r\n    dialog: { dependencies: ['linkbutton', 'window'] },\r\n    messager: { dependencies: ['linkbutton', 'window', 'progressbar'] },\r\n    layout: { dependencies: ['resizable', 'panel'] },\r\n    tabs: { dependencies: ['panel', 'linkbutton'] },\r\n    menubutton: { dependencies: ['linkbutton', 'menu'] },\r\n    splitbutton: { dependencies: ['menubutton'] },\r\n    accordion: { dependencies: ['panel'] },\r\n    textbox: { dependencies: ['validatebox', 'linkbutton'] },\r\n    filebox: { dependencies: ['textbox'] },\r\n    combo: { dependencies: ['panel', 'textbox'] },\r\n    combobox: { dependencies: ['combo'] },\r\n    combotree: { dependencies: ['combo', 'tree'] },\r\n    combogrid: { dependencies: ['combo', 'datagrid'] },\r\n    combotreegrid: { dependencies: ['combo', 'treegrid'] },\r\n    validatebox: { dependencies: ['tooltip'] },\r\n    numberbox: { dependencies: ['textbox'] },\r\n    searchbox: { dependencies: ['menubutton', 'textbox'] },\r\n    spinner: { dependencies: ['textbox'] },\r\n    numberspinner: { dependencies: ['spinner', 'numberbox'] },\r\n    timespinner: { dependencies: ['spinner'] },\r\n    tree: { dependencies: ['draggable', 'droppable'] },\r\n    datebox: { dependencies: ['calendar', 'combo'] },\r\n    datetimebox: { dependencies: ['datebox', 'timespinner'] },\r\n    slider: { dependencies: ['draggable'] }\r\n}\r\n/**\r\n * 获取依赖项\r\n * @param name \r\n */\r\nexport function getDepend(name:string){\r\n    let deps = depents[name];\r\n    let depret = [];\r\n    if(deps && deps.dependencies){\r\n        $.map(deps.dependencies, d => {\r\n            if(depents[d]){\r\n                depret = depret.concat(getDepend(d));\r\n            }\r\n            depret.push(d);\r\n        });\r\n    }\r\n    return depret;\r\n}\r\n\r\n/**\r\n * 根据组件名、方法名，获取此方法归属组件（因为方法有可能归属于依赖组件）\r\n * @param componentName 组件名\r\n * @param methodName 方法名\r\n * @param jquery jquery对象\r\n */\r\nexport function getDependNameOfComponent(componentName:string, methodName:string, argdeps, jquery:JQueryStatic):string{\r\n    let methods = jquery.fn[componentName].methods;\r\n    let result = null;\r\n    $.map(Object.getOwnPropertyNames(methods), m => {\r\n        if(m == methodName ){\r\n            result = componentName;\r\n            return false;\r\n        }\r\n    });\r\n    if(!result){\r\n        let deps = depents[componentName] ? depents[componentName].dependencies : null; \r\n        if(deps){\r\n            $.map(deps, d => {\r\n                if(!result){\r\n                    let tmp = getDependNameOfComponent(d, methodName, argdeps, jquery); \r\n\r\n                    if( tmp && argdeps){ //如果查询到的组件名在依赖列表内，可使用\r\n                        let depkeys = Object.getOwnPropertyNames(argdeps).join(',');\r\n                        if(depkeys.indexOf(tmp) >=0){\r\n                            result = tmp;\r\n                        }\r\n                    }\r\n                }\r\n            }); \r\n        }\r\n    }\r\n    return result;\r\n}","import {getDependNameOfComponent} from '../generates/depends' ;\r\nimport {IExecute} from './iexecute';\r\n\r\n\r\n/**\r\n * 获取可执行方法（带依赖检测）\r\n */\r\nexport class DepCheckExecute implements IExecute {\r\n\r\n    public jquery:JQueryStatic;\r\n    /**\r\n     * 执行依赖方法时，需要获取依赖组件的列表\r\n     */\r\n    public deps:any;\r\n    /**\r\n     * 不支持destroy方法的组件\r\n     */\r\n    public noSupportDestroy:Array<string>;\r\n\r\n    constructor(jquery:JQueryStatic){\r\n        this.jquery = jquery;\r\n        this.deps={\r\n            'combo':{\r\n                'textbox': 'textbox'\r\n            },\r\n            'combogrid': {\r\n                'datagrid': 'grid'\r\n            },\r\n            'combotreegrid':{\r\n                'treegrid': 'grid'\r\n            },\r\n            'combotree':{\r\n                'tree': 'tree'\r\n            },\r\n            'datagrid':{\r\n                'panel': 'getPanel',\r\n                'pagination': 'getPager'\r\n            },\r\n            'propertygrid':{\r\n                'panel': 'getPanel'\r\n            },\r\n            'treegrid':{\r\n                'panel': 'getPanel'\r\n            },\r\n            'datetimebox':{\r\n                'spinner': 'spinner'\r\n            },\r\n            'datebox':{\r\n                'calendar': 'calendar'\r\n            },\r\n            'searchbox':{\r\n                'textbox': 'textbox',\r\n                'menu': 'menu'\r\n            },\r\n            'datalist':{                \r\n                'panel': 'getPanel',\r\n                'pagination': 'getPager'\r\n            }\r\n        }\r\n        this.noSupportDestroy= ['layout', 'tabs'];\r\n    }\r\n\r\n    /**\r\n     * 获取可执行方法（带依赖检测）\r\n     */\r\n    execute(compName: string, methodName: string, $dom:JQuery, args:Array<any>) {\r\n        let findComp = false;\r\n        $.map(this.noSupportDestroy,(item, key)=>{\r\n            if(item == compName){\r\n                findComp = true;\r\n                return false;\r\n            }\r\n        });\r\n        if(methodName == 'destroy' && findComp){\r\n            return;\r\n        }\r\n        //have bug: 如我执行分页的select方法，很有可能会调用linkbutton的select。依赖组件之间有重名方法时，有问题\r\n        let depCompName = getDependNameOfComponent(compName, methodName, this.deps[compName], this.jquery);\r\n        if(depCompName && depCompName != compName && this.deps[compName]){\r\n            //依赖上的\r\n            var depHandler = $dom[compName].apply($dom, [this.deps[compName][depCompName]]);\r\n            let $depDom = this.jquery(depHandler[0]);\r\n            return depHandler[depCompName].apply($depDom, args);\r\n        } \r\n        return $dom[compName].apply($dom, args);  \r\n    }\r\n}","import {IExecute} from './iexecute';\r\nimport {GenerateOption} from '../generateOption';\r\nimport {DepCheckExecute} from './depcheckExecute';\r\n\r\n/**\r\n * 提供获取的可执行的入口\r\n */\r\nexport class ExecuteProivder implements IExecute {\r\n\r\n    public opt:GenerateOption;\r\n    private executes:IExecute;\r\n    constructor(opt:GenerateOption){\r\n        this.opt = opt;\r\n        this.executes = new DepCheckExecute(this.opt.jquery);\r\n    }\r\n\r\n    execute(compName: string, methodName: string, $dom:JQuery, args:Array<any>) {\r\n        return this.executes.execute(compName, methodName, $dom, args);\r\n    }\r\n}","import { IGenerate } from './igenerate';\r\nimport { GenerateOption } from './generateOption';\r\n\r\nexport class DefaultGenerate implements IGenerate {\r\n    public option:GenerateOption;\r\n    constructor(option:GenerateOption){\r\n        this.option = option;\r\n    }\r\n    generate(componentName: string, params: any, viewModel: any) {\r\n        let first = true, that = this;\r\n\r\n\r\n        this._touchMount(componentName, params, viewModel);\r\n        let observableKeys = this._getObservableKeys(params);\r\n\r\n        //配置参数存在，就进行监听\r\n        if(params.options){ \r\n            //监听params的变化变化\r\n            ko.computed(function(){\r\n                let changeOpts = that._getChangeObservable(params,observableKeys,viewModel);\r\n\r\n                if(first){ //如果是初始化执行，后面的业务不用重复执行了\r\n                    first = false;\r\n                    return;\r\n                }\r\n                if(changeOpts.length>0){\r\n                    that._touchPaint(componentName,params,viewModel,changeOpts,function(){                        \r\n                        //引起了组件重绘\r\n                        viewModel.repaint && viewModel.repaint(params.options); \r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        return viewModel;\r\n    }\r\n\r\n     /**\r\n     * 内部方法，获取配置参数(options)上的所有可监控对象的key，首次渲染组件时执行\r\n     * @param params 组件的所有参数\r\n     */\r\n    _getObservableKeys(params:any):Array<string>{\r\n        let keys = new Array<string>();\r\n        let opts = params.options;\r\n        if(!opts) return keys;\r\n        $.map(Object.getOwnPropertyNames(opts),(key)=>{\r\n            let param = opts[key];\r\n            if(ko.isObservable(param)){\r\n                keys.push(key);\r\n            }\r\n        });\r\n        return keys;\r\n    }\r\n\r\n    /**\r\n     * 获取有变更的监控对象列表\r\n     * @param params 配置对象\r\n     * @param observableKeys 可监控的参数列表key\r\n     * @param viewModel 视图数据对象\r\n     * @return \r\n     * {\r\n     *  changeOpts：存在变更的对象列表\r\n     *  reflows：可以使用回流操作来处理的变更列表\r\n     * }\r\n     */\r\n    _getChangeObservable(params:any, observableKeys:Array<string>, viewModel:any):any{\r\n        let opts = params.options; \r\n        let changeOpts = new Array<any>();\r\n        $.map(observableKeys, key => {\r\n            let param = opts[key];\r\n            let tmp = ko.unwrap(param);\r\n            //探测监控对象有变化的属性，区分那些可以用方法进行改变，那些需要重绘\r\n            if(ko.isObservable(param) && param.hasChanged()){\r\n                changeOpts.push(param);\r\n            }\r\n        });\r\n        return changeOpts;\r\n    }\r\n\r\n    /**\r\n     * 触发挂载方法，以及相关勾子\r\n     * @param componentName 组件名称\r\n     * @param params 参数列表\r\n     * @param viewModel 视图数据对象\r\n     */\r\n    _touchMount(componentName:string, params:any, viewModel:any){\r\n        let canPaint = true;\r\n        if(viewModel.beforeMount){//绘制前的勾子\r\n            canPaint = viewModel.beforeMount(params, componentName);\r\n        }\r\n        if(true || canPaint){//阻止子组件的渲染？？？怎么办\r\n            viewModel.paint && viewModel.paint(params.options || {});\r\n            if(viewModel.afterMount){//绘制后的勾子\r\n                viewModel.afterMount(params, componentName);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 触发组件的重绘\r\n     * @param componentName 组件名称\r\n     * @param params 参数列表\r\n     * @param viewModel 视图数据对象\r\n     * @param changeOpts 存在变更的可监控列表\r\n     * @param action beforePaint与afterPaint之间需要执行的动作\r\n     */\r\n    _touchPaint(componentName:string, params:any, viewModel:any, changeOpts:any, action:any){\r\n        let canPaint;\r\n        if(viewModel.beforePaint){\r\n            canPaint = viewModel.beforePaint(params, componentName, changeOpts);\r\n        }\r\n        if(true || canPaint){ \r\n            action && action();\r\n            if(viewModel.afterPaint){\r\n                viewModel.afterPaint(params, componentName);\r\n            }\r\n        }\r\n    }\r\n}","import { GenerateOption } from \"../generateOption\";\r\n\r\n\r\n/**\r\n * 扩展对window, dialog, panel, Layout, tabs, accordion控件内容可绑定ko组件的能力\r\n */\r\nexport class ExtendBind{\r\n    private option;\r\n    private jquery;\r\n    private ko; \r\n    constructor(option:GenerateOption){\r\n        this.option = option;\r\n        this.jquery = option.jquery;\r\n        this.ko = option.ko; \r\n    }\r\n    extend(name, opts,bindContext){\r\n        let eName = this._getEventName(name);\r\n        if(eName){\r\n            this._extendOption(eName, opts, bindContext);\r\n        }\r\n    }\r\n    /**\r\n     * 获取可扩展的事件名称\r\n     */\r\n    _getEventName = function(name){\r\n        let eventName = null;\r\n        switch(name){\r\n            case \"window\":\r\n            case \"dialog\":\r\n            case \"layout\":\r\n            case \"panel\":\r\n            //modify: 2018-10-08 sam dragon remove onAdd in tabs and accordion, and add listen onBeforeOpen in tabs and accordion.\r\n            case \"tabs\":\r\n            case \"accordion\":\r\n                eventName = \"onBeforeOpen\";\r\n                break;\r\n        }\r\n        return eventName;\r\n    }\r\n    /**\r\n     * 将指定的事件扩展为支持ko组件自动绑定的能力\r\n     * @param eName 事件名称\r\n     * @param opts 配置参数\r\n     * @param bindContext ko组件上下文\r\n     */\r\n    _extendOption(eName, opts,bindContext){ \r\n        let that = this;\r\n        if( opts && opts.viewModel){ \r\n            //说明有ko组件需要绑定\r\n            let _orgEvent = opts[eName];\r\n            let childBindContext; //绑定对象的创建\r\n            opts[eName] = function(){\r\n                //modify: 2018-10-08 sam dragon 处理tabs、accordion组件选项切换引起的Bug。\r\n                if(childBindContext){\r\n                    ko.removeNode(this.firstChild);\r\n                    $(this).append(opts.content);\r\n                }                \r\n                //viewModel必须是对象\r\n                childBindContext = bindContext.createChildContext(opts.viewModel,undefined,function(ctx){\r\n                });\r\n                //@ts-ignore\r\n                that.ko.applyBindingsToDescendants(childBindContext,this);//调用者，肯定是组件\r\n                _orgEvent && _orgEvent.apply(childBindContext.$data, arguments); //执行开发者配置的事件\r\n            };\r\n        }\r\n    }\r\n}","///<reference types=\"../../types/easyui\" />\r\n\r\nimport { IGenerate } from '../igenerate';\r\nimport { GenerateOption } from '../generateOption';\r\nimport { EasyuiHelper } from './easyuiHelper';\r\nimport { relation } from './optionAndMethodsRelation';\r\nimport { getDepend } from './depends';\r\nimport { unique, CONSTKEY, getTemplate } from '../utils';\r\nimport { IExecute, ExecuteProivder } from '../methodExceuteProvider'; \r\nimport { DefaultGenerate } from '../defaultGenerate';\r\nimport {ExtendBind} from './extendbind';\r\n\r\nexport class EasyuiGenerate extends DefaultGenerate {\r\n\r\n    /**\r\n     * easyui对象\r\n     */\r\n    public easyui:any;\r\n\r\n    /**\r\n     * jquery对象\r\n     */\r\n    public jquery:JQueryStatic;\r\n\r\n    /**\r\n     * 获取执行方法的提供者\r\n     */\r\n    public executeProvider:IExecute;\r\n\r\n    /**\r\n     * 监听列表\r\n     */\r\n    private computeds:Array<any>;\r\n\r\n    /**\r\n     * 扩展处理\r\n     */\r\n    private extendBind:ExtendBind;\r\n\r\n    constructor(option:GenerateOption){ \r\n        super(option);\r\n        this.jquery = option.jquery;\r\n        this.easyui = this.jquery.parser;\r\n        this.executeProvider = new ExecuteProivder(option);\r\n        this.extendBind=new ExtendBind(option);\r\n        this.registerPlugins();\r\n    }\r\n\r\n    /**\r\n     * 组件easyui的相关组件\r\n     */\r\n    registerPlugins(){\r\n        //fix easyui defaults\r\n        //1. datagrid missing columns, frozenColumns;\r\n        this.jquery.fn.datagrid.defaults.columns = [[]];\r\n        this.jquery.fn.datagrid.defaults.frozenColumns = [[]];\r\n\r\n        //extends panel default event.\r\n        this._extendPanelEvent();\r\n\r\n        let plugins = this.easyui.plugins;\r\n        //动态生成一个function的类\r\n        $.map(plugins, pluginName => {\r\n            let defaults = this.jquery.fn[pluginName].defaults;\r\n            let methods = this.jquery.fn[pluginName].methods;\r\n            let deps = getDepend(pluginName);\r\n            if(defaults){\r\n                //options必须要是独立的，事件（放原型上），方法可以原型链上的\r\n                let props = Object.getOwnPropertyNames(defaults);\r\n                //方法\r\n                let methodKeys = Object.getOwnPropertyNames(methods);\r\n                if(deps){\r\n                    $.map( deps, dep=>{\r\n                        let depMethods = this.jquery.fn[dep].methods;\r\n                        methodKeys = methodKeys.concat(Object.getOwnPropertyNames(depMethods));\r\n                    });\r\n                    methodKeys = unique(methodKeys);\r\n                }\r\n                this.option.ko.components.register(`${CONSTKEY.CompPrefix}${pluginName}`,{\r\n                    template: getTemplate(pluginName),\r\n                    viewModel: EasyuiHelper.createEasyui(pluginName, props, methodKeys, this.executeProvider, this.extendBind)\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    generate(componentName: string, params: any, viewModel: any):any {\r\n        let first = true, that = this;\r\n\r\n        this._touchMount(componentName, params, viewModel);\r\n        //获取监控数据列表\r\n        let observableKeys = this._getObservableKeys(params);\r\n\r\n        //配置参数存在，就进行监听\r\n        if(params.options){ \r\n            //监听params的变化变化\r\n            //@ts-ignore\r\n            viewModel.computedObservable = ko.computed({\r\n                read: function(){\r\n                \r\n                    //todo: 无意义，ko比较的是否判断，是需要传入一个比较的版本号的，每个属性都是有改动\r\n                    let changeObs = that._getChangeObservable(params,observableKeys,viewModel);\r\n    \r\n                    if(first){ //如果是初始化执行，后面的业务不用重复执行了\r\n                        first = false;\r\n                        return;\r\n                    }\r\n                    if(changeObs.changeOpts.length>0){\r\n                        that._touchPaint(componentName, params, viewModel, changeObs,function(){\r\n                            if(changeObs.changeOpts.length == changeObs.reflows.length){//说明配置的改变，可能通过方法操作完成\r\n                                $.map(changeObs.reflows, item=>{\r\n                                    viewModel[item.methodName](item.val);\r\n                                });\r\n                            }else{\r\n                                //引起了组件重绘\r\n                                viewModel.repaint(params.options);\r\n                            }\r\n                        });\r\n                    }\r\n                },\r\n                disposeWhenNodeIsRemoved:true\r\n            });\r\n        }\r\n\r\n        return viewModel;\r\n    }\r\n\r\n    /**\r\n     * 获取有变更的监控对象列表\r\n     * @param params 配置对象\r\n     * @param observableKeys 可监控的参数列表key\r\n     * @param viewModel 视图数据对象\r\n     * @return \r\n     * {\r\n     *  changeOpts：存在变更的对象列表\r\n     *  reflows：可以使用回流操作来处理的变更列表\r\n     * }\r\n     */\r\n    _getChangeObservable(params:any, observableKeys:Array<string>, viewModel:any):any{\r\n        let opts = params.options; \r\n        let changeOpts = new Array<any>();\r\n        let reflows = new Array<any>(); //可以通过方法来进行配置改变的参数\r\n        $.map(observableKeys, key => {\r\n            let param = opts[key];\r\n            let tmp = ko.unwrap(param);\r\n            //探测监控对象有变化的属性，区分那些可以用方法进行改变，那些需要重绘\r\n            if(ko.isObservable(param) && param.hasChanged()){\r\n                changeOpts.push(param);\r\n                if(relation[viewModel.name] && relation[viewModel.name][key]){\r\n                    reflows.push({\r\n                        val: tmp,\r\n                        methodName: relation[viewModel.name][key]\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        return {\r\n            changeOpts: changeOpts,\r\n            reflows: reflows\r\n        }\r\n    }\r\n\r\n    /**\r\n     * modify:2018-06-05 sam dragon, 重写panel的onOpen方法，用于panel内容的组件解析\r\n     * modify:2018-09-30 sam dragon, linkbutton增加destroy方法，用于销毁组件\r\n     */\r\n    _extendPanelEvent(){\r\n        $.fn.panel.defaults.onOpen = function(){\r\n        }\r\n        //@ts-ignore\r\n        $.fn.linkbutton.methods.destroy = function($dom){\r\n            $dom.unbind('.linkbutton');\r\n            $dom.remove();\r\n        }\r\n    }\r\n}","import {IExecute} from '../methodExceuteProvider';\r\nimport {CONSTKEY, getTemplate, COMPTYPE, convertArgToArray} from '../utils';\r\nimport {BaseEasyuiComp} from './baseEasyuiComp';\r\nimport { ExtendBind } from './extendbind';\r\n \r\nexport  class EasyuiHelper{\r\n    static createEasyui(compName:string, props:Array<string>, methods, execute:IExecute, extendBind:ExtendBind):any{\r\n        let tmpClass = class extends BaseEasyuiComp { \r\n            public $dom:JQuery;\r\n            public params: any;\r\n            constructor(params, componentConfig){ \r\n                super(compName.toLowerCase(), props, componentConfig);\r\n                this.params = params;\r\n                if(!this.params.options){\r\n                    this.params.options = {};\r\n                }\r\n                this.$dom = $($(componentConfig.element)[0].firstChild);\r\n                let that = this;\r\n                //绑定方法，方法还需要继承组件支持的方法的绑定\r\n                $.map(Object.getOwnPropertyNames(methods), index=>{\r\n                    if(!$.isNumeric(index)) return true;\r\n                    let methodName = methods[index]; \r\n                    that[methodName] = function(){\r\n                        //需要加一个拦截机制，用于处理依赖组件的方法（如：combogrid，依赖grid，那么grid的方法怎么执行）\r\n                        let args = convertArgToArray.call(arguments);\r\n                        //传入的参数进行扩展\r\n                        extendBind.extend(that.name, args[0], that.koContext); \r\n                        args.unshift(methodName);\r\n                        return execute.execute(that.name, methodName, that.$dom, args); \r\n                    }; \r\n                }); \r\n            }   \r\n            \r\n            /**\r\n             * 绑定change事件\r\n             */\r\n            private bindChangeEvent(sourceopts, opt:any){ \r\n                \r\n                let changeEvent = false;\r\n                $.map(props,(item, key)=>{\r\n                    if(item == 'onChange'){\r\n                        changeEvent = true;\r\n                        return false;\r\n                    }\r\n                });\r\n                if(sourceopts.value && ko.isObservable(sourceopts.value) && changeEvent){\r\n                    let onChangeFn = opt.onChange;\r\n                    let that = this;\r\n                    opt['onChange'] = function(newValue, oldValue){\r\n                        //modify: 2018-10-10 sam dragon set value, but don't send notification.\r\n                        // and add onChange event.\r\n                        sourceopts.value._latestValue = newValue; \r\n                        onChangeFn && onChangeFn.call(that, newValue, oldValue);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            protected createOptions(options){\r\n                let opt = this.createOptionsCore(options);\r\n                if(options){\r\n                    this.bindChangeEvent(options, opt);\r\n                }    \r\n                extendBind.extend(this.name, opt, this.koContext); \r\n                return opt;\r\n            } \r\n            public repaint(options:any){\r\n                this.resetComp(options);\r\n                this.paint(options);\r\n            }\r\n            public dispose(){\r\n                console.log('dispose ' + this.name);\r\n                //@ts-ignore\r\n                if(this.computedObservable){\r\n                    //@ts-ignore\r\n                    this.computedObservable.dispose();\r\n                }\r\n                if(this.params.options.dispose){\r\n                    this.params.options.dispose.apply(this);\r\n                }else{\r\n                    //@ts-ignore\r\n                    this.destroy && this.destroy();\r\n                }\r\n            }\r\n        };\r\n\r\n        return tmpClass;\r\n    }\r\n}\r\n/**\r\n * 根据dom获取上下文\r\n * @param dom dom节点 \r\n */\r\nexport function getContextFor(dom:HTMLElement){\r\n    let comp = $.data(dom);\r\n    return comp ? comp.$data : null;\r\n}","import { EasyuiMessager } from './koeasyuimessager';\r\nimport { EasyuiDialogs } from './kodialogs';\r\nimport { EasyuiDesktop } from './kodeskop';\r\nimport { CONSTKEY } from '../utils';\r\n\r\nexport function use(ko:KnockoutStatic){\r\n    //@ts-ignore\r\n    ko.components.register(`${CONSTKEY.CompPrefix}messager`,{\r\n        viewModel:EasyuiMessager,\r\n        template: '<div></div>'\r\n    });\r\n    //dialogs\r\n    //@ts-ignore\r\n    ko.components.register(`${CONSTKEY.CompPrefix}dialogs`,{\r\n        viewModel:EasyuiDialogs,\r\n        template:EasyuiDialogs.getTemplate()\r\n    }); \r\n    //ko-desktop\r\n    //@ts-ignore\r\n    ko.components.register(`${CONSTKEY.CompPrefix}desktop`,{\r\n        viewModel: EasyuiDesktop,\r\n        template: '<div></div>'\r\n    });\r\n}\r\n\r\nexport * from './easyuiGenerate';\r\nexport { getContextFor } from './EasyuiHelper';\r\nexport { getDependNameOfComponent } from './depends';","import {IGenerate} from './igenerate';\r\nimport {GenerateOption} from './generateOption';\r\nimport {EasyuiGenerate, use} from './generates';\r\nimport { COMPTYPE } from './utils';\r\nimport { DefaultGenerate } from './defaultGenerate';\r\n\r\n/**\r\n * 生成ko组件，并注册到ko组件对象中\r\n */\r\nexport class GenerateFactory implements IGenerate {\r\n    public option: GenerateOption;\r\n    public generates: any;\r\n    constructor(option:GenerateOption){\r\n        this.option = option;\r\n        this.generates ={\r\n            [COMPTYPE.easyui]: new EasyuiGenerate(this.option),\r\n            [COMPTYPE.norm]: new DefaultGenerate(this.option)\r\n        }\r\n        use(this.option.ko); //引用ko-messager组件\r\n    }\r\n\r\n    generate(componentName: string, params: any, viewModel: any):any {\r\n        let generateHandler = this.generates[viewModel.type || COMPTYPE.norm];\r\n        if(generateHandler){\r\n            return generateHandler.generate(componentName, params, viewModel);\r\n        }\r\n        return viewModel;\r\n    }\r\n}","import {IGenerate} from './igenerate';\r\n\r\n/**\r\n * ko的自定义loader，用于创建ko-easyui组件的生命周期\r\n */\r\nexport class EasyuiLoader{\r\n    public factory:IGenerate;\r\n    constructor(factory: IGenerate){ \r\n        this.factory = factory;\r\n    }\r\n    getConfig(name:any, callback:any){\r\n        callback(null);\r\n    }\r\n    loadComponent(name:any, componentConfig:any, callback:any){\r\n        callback(null);\r\n    }\r\n    loadTemplate(name:any, templateConfig:any, callback:any){\r\n        //这里做一些视图不显示的控制，在渲染数据后，进行视频的展示\r\n        callback(null);\r\n    }\r\n    loadViewModel(name:any, viewModelConfig:any, callback:any){\r\n        //到这里，视图都是已经呈现好的\r\n        //这里要产生两个生命周期：渲染数据前、渲染数据后，以及一个视图重绘的事件\r\n        var nViewModelConfig = (params, componentConfig) => {\r\n            \r\n            //获取root对象\r\n            let $obj = ko.contextFor(componentConfig.element);\r\n            let $root = $obj.$root;\r\n            let vm = new viewModelConfig(params, componentConfig, $root, $obj.$data); //current $data is parent.\r\n            //激活\r\n            if(vm.activate){\r\n                vm.activate(params,componentConfig);\r\n            }\r\n            let that = this;\r\n            vm.koDescendantsComplete = function(dom){\r\n                //组件绑定完成后的事件\r\n                //写入Context到自定义元素dom上\r\n                $.data(dom, ko.contextFor(dom.firstChild));\r\n                that.factory.generate(name, params, vm); \r\n            }\r\n            return vm;\r\n        }\r\n        callback(nViewModelConfig);\r\n    }\r\n} ","import {BaseComp} from './basecomp';\r\nimport { COMPTYPE } from './utils';\r\n\r\nexport class Components extends BaseComp{\r\n    public comps:KnockoutObservableArray<any>;\r\n    private paramComp:KnockoutObservable<any>;\r\n    private showHeader:any;\r\n    constructor(params){\r\n        super(COMPTYPE.norm);\r\n        this.comps = ko.observableArray();\r\n        this.paramComp = params.comp;\r\n        this.showHeader = params.showHeader || false;\r\n        if(this.paramComp){\r\n            this.paramComp.subscribe((nVal)=>{\r\n                let compInfo = {\r\n                    id:0,\r\n                    name:null,\r\n                    title:null,\r\n                    params:{},\r\n                    show: ko.observable(false)\r\n                };\r\n                if(typeof nVal == 'string'){\r\n                    compInfo.name = compInfo.title = nVal;\r\n                }else{\r\n                    compInfo.name = nVal.name;\r\n                    compInfo.title = nVal.title || nVal.name;\r\n                    compInfo.params = nVal.params || {};\r\n                    compInfo.id = nVal.id || 0;\r\n                }\r\n                //@ts-ignore, the first read, execute fun at param in computed.\r\n                compInfo.domId =  ko.computed(function(){\r\n                    return 'components-item' + this.id;\r\n                }, compInfo);\r\n                this._setComp(compInfo);\r\n            }); \r\n        }\r\n    }\r\n    private _setComp(compinfo){\r\n        var comp;\r\n        $.each(ko.unwrap(this.comps), function(i,v){\r\n            v.show(false);\r\n            if(v.name == compinfo.name && v.id == compinfo.id){\r\n                comp = v;\r\n            }\r\n        });\r\n        if(!comp){\r\n            comp = compinfo;\r\n            this.comps.push(comp);\r\n        }\r\n        comp.show(true);\r\n    }\r\n    public paint(options: any) {\r\n\r\n    }    \r\n    public repaint(options: any) {\r\n\r\n    }\r\n    public remove(arg:any){\r\n        var comp;\r\n        let isObj = Object.prototype.toString.call(arg) == '[object String]' ? false : true;\r\n        let comps = ko.unwrap(this.comps);\r\n        $.each(comps, function(i,v){\r\n            //modify: 2019-07-11 sam  remark: arg is object or string\r\n            if( (isObj && arg.name == v.name && arg.id == v.id ) || (!isObj && v.name == arg)){\r\n                comp = v;\r\n            }\r\n        });\r\n        if(comp){\r\n            comp.show(false);\r\n            this.comps.remove(comp);\r\n        }\r\n        comps = ko.unwrap(this.comps);\r\n        if(comps.length > 0){\r\n            let hasShow = false;\r\n            $.each(comps, (i,v)=>{\r\n                if(v.show()){\r\n                    hasShow = true;\r\n                    return false;\r\n                }\r\n            });\r\n            if(!hasShow){\r\n                comps[comps.length - 1].show(true);\r\n            }\r\n        }\r\n    }\r\n    public removeAll(){\r\n        this.comps.removeAll();\r\n    }\r\n    public show(data){\r\n        $.each(ko.unwrap(this.comps), function(i,v){\r\n            if(ko.unwrap(data.name == v.name && data.id == v.id)){\r\n                v.show(true);\r\n            }else{\r\n                v.show(false);\r\n            }\r\n        });\r\n    }\r\n    static getTemplate(){\r\n        return '<div class=\"components-wrap\"><div class=\"components-header\" data-bind=\"if:showHeader\"><div class=\"components-titles\" data-bind=\"foreach:comps\" ><div class=\"title-item\" data-bind=\"css:{active:show},click:$parent.show.bind($parent)\" ><span data-bind=\"text:$data.title\"></span><span class=\"icon-clear\" data-bind=\"click:$parent.remove.bind($parent)\" ></span></div></div></div><div class=\"components-list\" data-bind=\"foreach:comps\" ><div class=\"components-item\" data-bind=\"component:$data,visible:show,attr:{id:$data.domId}\" ></div></div></div>'\r\n    }\r\n}","/**\r\n * 主体思路\r\n * 1. 获取所有easyui的组件，以及组件的相关事件、配置参数、方法等\r\n * 2. easyui组件 映射为 ko-easyui组件，新组件名为 ko-easyui原组件名\r\n * 3. 做渲染钩子，建立一个组件生命周期的钩子\r\n * 4. 组件注册到ko对象上\r\n */\r\n\r\n import {IGenerate} from './igenerate';\r\n import {GenerateOption} from './generateOption';\r\n import {GenerateFactory} from './generateFactory'; \r\n import {EasyuiLoader} from './loader';\r\n import { CONSTKEY } from './utils';\r\n import { Components } from './kocomponents';\r\n\r\n\r\n /**\r\n  * 插件注册入口\r\n  * @param ko \r\n  */\r\n export function use(ko:KnockoutStatic){\r\n     let opt = new GenerateOption(ko);\r\n     let factory = new GenerateFactory(opt);\r\n     ko.components.loaders.unshift(new EasyuiLoader(factory));\r\n\r\n     \r\n    //ko-components\r\n    ko.components.register(`${CONSTKEY.CompPrefix}components`,{\r\n        viewModel:Components,\r\n        template:Components.getTemplate()\r\n    }); \r\n }\r\n\r\n export { getContextFor } from './generates';"],"names":["ko","jquery","$","type","arrays","result","Array","hash","Object","create","irow","length","elm","push","CONSTKEY","compName","defaultVaue","specialValue","val","convertArgToArray","prototype","slice","COMPTYPE","name","props","componentConfig","easyui","$dom","element","firstChild","$parent","parent","context","contextFor","data","koContext","options","opt","viewModel","toJS","map","value","key","substring","isFunction","bind","createOptionsCore","createOptions","closest","CompPrefix","destroy","getTemplate","append","BaseComp","params","getOwnPropertyNames","messager","defaults","bindMethods","keys","getMethodKeys","args","call","arguments","apply","methodKeys","opts","extend","paint","BaseEasyuiComp","norm","bindContext","list","observableArray","that","unwrap","funClose","onClose","removeDialog","$key","dom","cleanNode","firstElementChild","remove","item","fn","desktop","unshift","methods","execute","extendBind","tmpClass","toLowerCase","isNumeric","index","methodName","sourceopts","changeEvent","isObservable","onChangeFn","onChange","newValue","oldValue","_latestValue","bindChangeEvent","resetComp","console","log","computedObservable","dispose","relation","tooltip","textbox","panel","passwordbox","combo","combobox","combotree","combogrid","combotreegrid","tagbox","numberbox","datebox","datetimebox","datetimespinner","spinner","numberspinner","timespinner","slider","filebox","datagrid","datalist","propertygrid","tree","treegrid","depents","pagination","dependencies","window","dialog","layout","tabs","menubutton","splitbutton","accordion","validatebox","searchbox","deps","depret","d","concat","getDepend","componentName","argdeps","m","tmp","getDependNameOfComponent","depkeys","join","indexOf","noSupportDestroy","findComp","depCompName","depHandler","$depDom","executes","DepCheckExecute","option","first","_touchMount","observableKeys","_getObservableKeys","computed","changeOpts","_getChangeObservable","_touchPaint","repaint","param","hasChanged","canPaint","beforeMount","afterMount","action","beforePaint","afterPaint","eventName","eName","_getEventName","_extendOption","_orgEvent","childBindContext","removeNode","content","createChildContext","undefined","ctx","applyBindingsToDescendants","$data","parser","executeProvider","ExecuteProivder","ExtendBind","registerPlugins","columns","frozenColumns","_extendPanelEvent","plugins","pluginName","depMethods","dep","unique","components","register","template","EasyuiHelper","createEasyui","read","changeObs","reflows","disposeWhenNodeIsRemoved","onOpen","linkbutton","unbind","DefaultGenerate","comp","EasyuiMessager","EasyuiDialogs","EasyuiDesktop","generates","EasyuiGenerate","use","generateHandler","generate","factory","callback","templateConfig","viewModelConfig","nViewModelConfig","$obj","$root","vm","activate","koDescendantsComplete","comps","paramComp","showHeader","subscribe","nVal","compInfo","id","title","show","observable","domId","_setComp","compinfo","each","i","v","arg","isObj","toString","hasShow","removeAll","GenerateOption","GenerateFactory","loaders","EasyuiLoader","Components"],"mappings":"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"}